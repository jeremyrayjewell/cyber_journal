# SSH Notes: Week of 2025-08-11                        
                                        
## 1. Port-Knocking Test Results                                                
| Host | Scenario   | Time                | Outcome                                | Notes                                      |
|------|------------|---------------------|-----------------------------------------|--------------------------------------------|
| kali | preknock   | 2025-08-10 15:55:00 | Network/transport failure               | Port 22 filtered before knock              |
| kali | postknock  | 2025-08-10 15:56:00 | Authentication succeeded (entered session) | KEX = `mlkem768x25519-sha256`              |
| kali | postclose  | 2025-08-10 15:57:00 | Network/transport failure               | Port closed after reverse knock sequence   |
                                                                                
## 2. Raw Command Log
```bash
# Pre-knock check (expected fail)
nc -vz -w 2 -n 192.168.1.12 22 \
  2>&1 | tee ~/ssh-logs/kali-preknock-nc-2025-08-10.log
ssh -vvv -o ConnectTimeout=5 kali@192.168.1.12 \
  2>&1 | tee ~/ssh-logs/kali-preknock-ssh-2025-08-10.log

# Open knock sequence
knock 192.168.1.12 1111 2222 3333 \
  2>&1 | tee ~/ssh-logs/kali-knock-open-2025-08-10.log

# Post-knock SSH (expected success)
ssh -vvv kali@192.168.1.12 \
  2>&1 | tee ~/ssh-logs/kali-postknock-ssh-2025-08-10.log
exit

# Reverse knock (close)
knock 192.168.1.12 3333 2222 1111 \
  2>&1 | tee ~/ssh-logs/kali-knock-close-2025-08-10.log

# Post-close check (expected fail)
nc -vz -w 2 -n 192.168.1.12 22 \
  2>&1 | tee ~/ssh-logs/kali-postclose-nc-2025-08-10.log
ssh -vvv -o ConnectTimeout=5 kali@192.168.1.12 \
  2>&1 | tee ~/ssh-logs/kali-postclose-ssh-2025-08-10.log
```
## 3. Takeaways
- Port-knocking with knockd successfully hides SSH from unauthorized scans.
- Only clients that send the correct knock sequence gain temporary SSH access.
- Closing sequence works reliably, removing the IP from the iptables ACCEPT list.

## 4. Next Steps
- Automate logging so that generate_ssh_summary.py pulls these knock scenarios with timestamps.
- Add a Scenario column mapping directly to the test step (preknock, postknock, postclose).
- Consider adding an elapsed time measurement from knock to connection for future tests.
        
  ---

**Author:** Jeremy Ray Jewell  
[GitHub](https://github.com/jeremyrayjewell) | [LinkedIn](https://www.linkedin.com/in/jeremyrayjewell)  
